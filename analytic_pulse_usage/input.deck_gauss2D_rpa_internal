begin:constant
# laser
  l_lambda = 0.8 * micron
  l_omega = 2.0 * pi * c / l_lambda
  Twave = 2*pi/l_omega
  l_a0 = 20.0
  l_amp = l_a0 * me * c * l_omega/qe
# gaussian
  sg = 1
# pulse duration for 1/e^2sg amplitude of E
# first number is FWHM 
  dT = 15 * femto * 0.5*loge(2)^(-0.5/sg)
# effective spot size (FWHM in E)
  w0 = 0.60056 * 3.0 * micron
# focal location
  x0 = 0.0 * micron
# time to launch center of pulse
  dT0 = dT * 2.0

# density in terms of electrons (immobile ions)
  n_crit = critical(l_omega)
  den_max = 180*n_crit
  den_min = 0.001*den_max
  nppc = 500

# cells/wavelength
  dxi = 200
  dyi = dxi

# box size
  x_vac = 5 * micron
  x_plasma = 0.05 * micron
  ymax = 7*micron
  xmax = x_plasma + x_vac
  xmin = -x_vac

# gaussian focusing
  xf0 = x0 - xmin
  rayl = pi * w0^2 / l_lambda
  s0 = xf0/rayl
  s02 = xf0*xf0/(rayl*rayl)  
  r02 = y*y/w0^2

# time
  tend = 2*dT0 + (xmax-xmin)/c + 50*femto
# diagnostics
  tdump = 10 * femto
  tstart = tdump
  tave = Twave
  
# amplitude correction for boundary condition
  ft = 0.95/sqrt(2)
  af = 1 - (1+ft^2)*pi^2/(4*dxi^2)
end:constant

begin:control
  nx = floor(dxi*(xmax-xmin)/l_lambda)
  ny = floor(dyi*2*ymax/l_lambda)
  x_min = xmin
  x_max = xmax
  y_min = -ymax
  y_max = ymax
  t_end = tend
  dlb_threshold=0.5
end:control

begin:laser
  boundary = x_min
  amp = l_amp*af
  lambda = l_lambda
  t_profile = exp(-(time-dT0)^(2*sg)/dT^(2*sg))
  profile = exp(-r02/(1+s02))/(1+s02)^0.25
  phase = r02*s0/(1+s02)-0.5*atan(s0)
end:laser

begin:boundaries
  bc_x_min_field = simple_laser
  bc_x_min_particle = open
  bc_x_max = open
  bc_y_min = open
  bc_y_max = open
end:boundaries

begin:species
  name = Electron
  charge = -1.0
  mass = 1.0
  temp_ev = 0.0
  density_min = den_min
  npart_per_cell = nppc
  density = if(x gt 0.0*micron, den_max, 0.0)
  density = if(x gt x_plasma, 0.0, rho(Electron))  
  dump = T
end:species

begin:species
  name = Carbon
  charge = 6.0
  mass = 12*1836.0
  temp_ev = 0.0
  density_min = den_min
  npart_per_cell = nppc
  density = rho(Electron)/7
  dump = T
end:species

begin:species
  name = Proton
  charge = 1.0
  mass = 1836.0
  temp_ev = 0.0
  density_min = den_min
  npart_per_cell = nppc
  density = rho(Electron)/7
  dump = T
end:species

begin:output
  name = e_fields
  file_prefix = e_fields
  dt_snapshot = tdump
  dump_first = T
  dt_average = tave
  grid=always
  ex=always + single + snapshot + average
  ey=always + single + snapshot + average
  # bx=always + single + snapshot + average  
  # bz=always + single + snapshot + average
end:output

begin:output
  name = dens
  file_prefix = dens
  dt_snapshot = tdump
  dump_first = T
  dt_average = tave
  grid=always
  number_density=always + no_sum + species + single + snapshot + average
end:output

begin:output
  name = DF
  file_prefix = DF
  dt_snapshot = tdump/2
  dump_first = T
  dt_average = tave
  distribution_functions=always
  absorption = always
  total_energy_sum = always + species
end:output

begin:dist_fn
  name=en
  ndims=1
  dumpmask=always
  direction1=dir_en
  range1=(0,0)
  resolution1=2500
  include_species:Electron
  include_species:Proton
  include_species:Carbon
end:dist_fn
